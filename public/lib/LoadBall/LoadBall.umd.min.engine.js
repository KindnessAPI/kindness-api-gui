(("undefined"!==typeof self?self:this)["webpackJsonpLoadBall"]=("undefined"!==typeof self?self:this)["webpackJsonpLoadBall"]||[]).push([[3],{"0a14":function(e,t,i){"use strict";var n=i("8d74"),o=i.n(n);o.a},"11b7":function(e,t,i){"use strict";var n=i("8450"),o=i.n(n);o.a},3120:function(e,t,i){"use strict";var n=i("bee8"),o=i.n(n);o.a},"651e":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"full u-layer-base"},[i("Scene",{on:{ready:function(t){e.scene=t,e.init()}}},[e.scene&&e.renderer&&e.camera?e._t("scene",null,{audioAPI:e.audioAPI,videoAPI:e.videoAPI,camera:e.camera,control:e.control,scene:e.scene,renderer:e.renderer,execStack:e.execStack,self:e.self}):e._e()],2),i("div",{ref:"mounter",staticClass:"u-layer"})],1)},o=[],s=(i("ac6a"),i("cebc")),r=(i("4d54"),i("cf0b"),i("24bc"),i("e2fa"),i("9c52"),i("03f8"),i("1fcc"),i("4881"),i("cc32"),i("3d88"),i("4876"),{Scene:i("996d").default,Object3D:i("9202").default,PhysicsItem:i("cf9a").default}),a=i("5a89"),c=function(){return"_".concat((1e6*Math.random()).toFixed(0))},d={getRD:c,props:{mounter:{},videoAPI:{},audioAPI:{},controlType:{default:"orbit"},runComposer:{required:!0},glowConfig:{required:!0},toucher:{}},components:Object(s["a"])({},r),data:function(){return{getRD:c,self:this,rotator:!1,mouse:{x:0,y:0,z:0},rect:!1,execStack:{},gameReady:!1,audio:!1,control:!1,size:!1,dpi:2,rAFID:0,scene:!1,renderer:!1,camera:!1,readyInit:!1,world:!1,bloomPass:!1,Settings:{camPosition:{x:0,y:0,z:500},bloomPass:{threshold:.0846740050804403,strength:.9551227773073666,radius:1.0343776460626588}}}},beforeDestroy:function(){this.stop(),this.scene.dispose()},created:function(){},mounted:function(){},watch:{glowConfig:{deep:!0,handler:function(){this.bloomPass.threshold=this.glowConfig.threshold,this.bloomPass.strength=this.glowConfig.strength,this.bloomPass.radius=this.glowConfig.radius,this.renderer.toneMappingExposure=Math.pow(this.glowConfig.exposure,4)}}},methods:{init:function(){this.setupRenderer(),this.setupSizer(),this.setupCamera(),this.setupComposer(),"orbit"===this.controlType&&this.setupControl(),this.syncSize(),this.$emit("ready"),this.start()},setupAudio:function(){},setupControl:function(){var e=new a["OrbitControls"](this.camera,this.toucher);this.control=e,e.enableDamping=!0,e.enableKeys=!1},setupControlMap:function(){var e=new a["MapControls"](this.camera,this.toucher);e.enableDamping=!0,e.dampingFactor=.65,e.screenSpacePanning=!0,e.minDistance=1,e.enableRotate=!1,e.keys.UP=40,e.keys.BOTTOM=38,e.keys.LEFT=39,e.keys.RIGHT=37,this.control=e},setupRenderer:function(){this.renderer=new a["WebGLRenderer"]({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),this.renderer.domElement.style.marginBottom="-6px",this.$refs["mounter"].appendChild(this.renderer.domElement)},setupCamera:function(){var e=this.size,t=75,i=e.width/e.height,n=.1,o=1e8,s=this.camera=new a["PerspectiveCamera"](t,i,n,o);s.position.x=this.Settings.camPosition.x,s.position.y=this.Settings.camPosition.y,s.position.z=this.Settings.camPosition.z},setupComposer:function(){var e=this.composer=new a["EffectComposer"](this.renderer),t=this.scene,i=this.camera,n=this.size,o=this.dpi,s=new a["RenderPass"](t,i);if(e.addPass(s),this.glowConfig){var r=new a["UnrealBloomPass"](new a["Vector2"](n.width*o,n.height*o),1.5,.4,.85);r.renderToScreen=!0,this.bloomPass=r,this.bloomPass.threshold=this.glowConfig.threshold,this.bloomPass.strength=this.glowConfig.strength,this.bloomPass.radius=this.glowConfig.radius,this.renderer.toneMappingExposure=Math.pow(this.glowConfig.exposure,4),e.addPass(r)}},setupSizer:function(){this.getSizeInfo(),window.addEventListener("resize",this.getSizeInfo,!1)},getSizeInfo:function(){if(this.$refs["mounter"]){var e=this.$refs["mounter"].getBoundingClientRect();this.rect=e,this.size={width:e.width,height:e.height,aspect:e.width/e.height},this.dpi=2}},syncSize:function(){var e=this,t=function(){var t=e.composer,i=e.renderer,n=e.camera,o=e.size,s=e.dpi,r=e.control;r&&r.update(),t.setSize(o.width*s,o.height*s),i.setPixelRatio(s),i.setSize(o.width,o.height),n.aspect=o.width/o.height,n.updateProjectionMatrix()};t(),window.addEventListener("resize",t,!1),this.$refs["mounter"].addEventListener("mousemove",function(t){e.mouse.x=t.pageX,e.mouse.y=t.pageY},!1)},stop:function(){window.cancelAnimationFrame(this.rAFID)},start:function(){var e=this,t=function t(){e.rAFID=window.requestAnimationFrame(t),e.render()};this.rAFID=window.requestAnimationFrame(t)},render:function(){var e=this.scene,t=this.camera,i=this.renderer,n=this.composer;this.mouse,this.rect;for(var o in this.execStack)this.execStack[o]();this.runComposer&&e&&t&&i&&n?n.render():e&&t&&i&&i.render(e,t)}}},u=d,h=(i("7a3b"),i("11b7"),i("2877")),l=Object(h["a"])(u,n,o,!1,null,"85030a5a",null);t["default"]=l.exports},6920:function(e,t,i){},"7a3b":function(e,t,i){"use strict";var n=i("6920"),o=i.n(n);o.a},8450:function(e,t,i){},"8d74":function(e,t,i){},9202:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"hidden"},[e._t("default")],2)},o=[],s=i("5a89"),r={props:{position:{},scale:{},quaternion:{},rotation:{},physics:{},visible:{default:!0}},watch:{visible:function(){this.obj3D.visible=this.visible},scale:{deep:!0,handler:function(e){e&&(this.obj3D.scale.x=e.x,this.obj3D.scale.y=e.y,this.obj3D.scale.z=e.z)}},position:{deep:!0,handler:function(e){e&&this.obj3D.position.copy(e)}},rotation:{deep:!0,handler:function(e){e&&(this.obj3D.rotation.x=e.x,this.obj3D.rotation.y=e.y,this.obj3D.rotation.z=e.z)}},quaternion:{deep:!0,handler:function(e){e&&this.obj3D.quaternion.copy(e)}}},data:function(){return{obj3D:new s["Object3D"]}},created:function(){var e=this;this.$on("add",function(t){e.obj3D.add(t)}),this.$on("remove",function(t){e.obj3D.remove(t)})},mounted:function(){this.scale&&this.obj3D.scale.copy(this.scale),this.position&&this.obj3D.position.copy(this.position),this.rotation&&(this.obj3D.rotation.x=this.rotation.x,this.obj3D.rotation.y=this.rotation.y,this.obj3D.rotation.z=this.rotation.z),this.obj3D.visible=this.visible,this.quaternion&&this.obj3D.quaternion.copy(this.quaternion),this.$emit("element",this.obj3D),this.$parent.$emit("add",this.obj3D)},beforeDestroy:function(){this.$emit("remove",this.obj3D),this.$parent.$emit("remove",this.obj3D)}},a=r,c=(i("0a14"),i("2877")),d=Object(c["a"])(a,n,o,!1,null,null,null);t["default"]=d.exports},"996d":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._t("default")],2)},o=[],s=i("5a89"),r={data:function(){return{scene:new s["Scene"]}},created:function(){var e=this;this.$on("add",function(t){e.scene.add(t)}),this.$on("remove",function(t){e.scene.remove(t)})},mounted:function(){this.$emit("ready",this.scene)}},a=r,c=(i("dde5"),i("2877")),d=Object(c["a"])(a,n,o,!1,null,null,null);t["default"]=d.exports},bee8:function(e,t,i){},cf9a:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"hidden"},[e._t("default")],2)},o=[],s=(i("7514"),i("7f7f"),{props:{userData:{default:!1},id:{},world:{},idb:{},geo:{default:"sphere"},move:{default:!1},noSleep:{default:!1},name:{default:"default-obj"},kinematic:{default:!1},size:{default:function(){return{x:11,y:11,z:11}}},density:{default:1},friction:{default:.2},restitution:{default:.2},belongsTo:{default:1},collidesWith:{default:4294967295}},data:function(){return{object3D:!1}},created:function(){var e=this;this.$on("add",function(t){e.object3D=t;var i=e.world.add({type:e.geo||"sphere",size:[e.size.x,e.size.y,e.size.z],pos:t.position.toArray(),rot:t.rotation.toArray().map(function(e){return e/(2*Math.PI)*360}),move:!!e.move,density:e.density||1,friction:e.friction||.2,restitution:e.restitution||.2,belongsTo:e.belongsTo||1,collidesWith:e.collidesWith||4294967295,kinematic:e.kinematic,name:e.name,noSleep:e.noSleep});e.idb.push({id:e.id,object:t,defaultPos:t.position.clone(),body:i,userData:e.userData}),e.$emit("body",i),e.$parent.$emit("add",t)}),this.$on("remove",function(t){e.object3D=t;var i=e.idb.find(function(t){return t.id===e.id});i&&(i.body.remove(),console.log("remove body",i.id)),e.$parent.$emit("remove",t)})}}),r=s,a=(i("3120"),i("2877")),c=Object(a["a"])(r,n,o,!1,null,"68a188e8",null);t["default"]=c.exports},dde5:function(e,t,i){"use strict";var n=i("e51e"),o=i.n(n);o.a},e51e:function(e,t,i){}}]);
//# sourceMappingURL=LoadBall.umd.min.engine.js.map